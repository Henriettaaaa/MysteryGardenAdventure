# 物理迷宫生成与可视化项目

## 项目简介
这是一个基于C++实现的迷宫生成与可视化系统。项目采用物理迷宫和虚拟迷宫两层结构，通过并查集算法生成随机迷宫，并使用SFML图形库进行可视化展示。

## 核心功能
1. **物理迷宫生成**
   - 支持自定义迷宫大小
   - 使用并查集算法确保迷宫的连通性
   - 随机生成墙壁，保证迷宫的随机性
   - 采用权重优化的并查集实现，提高合并效率

2. **虚拟迷宫显示**
   - 将物理迷宫映射为(2n+1)×(2n+1)的虚拟迷宫
   - 使用SFML图形库实现可视化界面
   - 墙体显示为墨绿色(#4E7935)
   - 通路显示为白色
   - 起点和终点显示为红色

## 技术实现

### 物理迷宫（PhysicalMaze）
1. **初始化**
   - 创建n×n大小的物理迷宫
   - 初始化并查集的parent数组和weight数组
   - 生成所有可能的墙（水平和垂直）

2. **迷宫生成算法**
   - 使用带权重的并查集算法
   - 随机打乱墙的顺序
   - 通过删除墙来连通相邻格子
   - 保证所有格子都是连通的

### 虚拟迷宫（VirtualMaze）
1. **坐标映射**
   - 物理格子(r,c)映射到虚拟格子(2r+1, 2c+1)
   - 相邻物理格子之间的连接点也被设置为通路

2. **可视化实现**
   - 使用SFML创建(2n+1)×(2n+1)的显示窗口
   - 墙体使用墨绿色(#4E7935)表示
   - 通路使用白色表示
   - 起点(1,1)和终点(2n-1,2n-1)使用红色标记

## 数据结构
1. **物理迷宫**
   - `parent[]`: 记录每个节点的父节点
   - `weight[]`: 记录每个集合的权重
   - `walls`: 存储墙的信息，使用pair表示墙两侧的格子编号

2. **虚拟迷宫**
   - `maze[][]`: 二维数组存储虚拟迷宫，0表示墙，1表示通路
   - 使用SFML的RenderWindow进行图形渲染

## 使用方法
```cpp
// 创建指定大小的迷宫
int size = PhysicalMaze::inputSize();
PhysicalMaze physicalMaze(size);
physicalMaze.generateMaze(size);

// 创建并显示虚拟迷宫
VirtualMaze virtualMaze(size);
virtualMaze.buildFromPhysical(physicalMaze);
virtualMaze.display();
```

## 环境要求
1. C++编译器（支持C++17）
2. SFML图形库
3. Visual Studio 2022（推荐）

## 项目结构
- `PhysicalMaze.h/cpp`: 物理迷宫的实现
- `VirtualMaze.h/cpp`: 虚拟迷宫和图形界面的实现
- `main.cpp`: 程序入口

## 性能特点
1. 迷宫生成
   - 时间复杂度：O(N×α(N))，其中N为格子总数，α为阿克曼函数的反函数
   - 空间复杂度：O(N)

2. 虚拟迷宫构建
   - 时间复杂度：O(N)
   - 空间复杂度：O(4N)，其中N为物理迷宫的格子总数

## 代码特性
1. 使用现代C++特性
2. 采用面向对象的设计方法
3. 清晰的物理/虚拟迷宫分离
4. 完整的注释说明

## 可能的扩展
1. 添加迷宫的可视化显示
2. 支持多种迷宫生成算法
3. 实现多个起点终点的路径规划
4. 添加迷宫难度调节功能 