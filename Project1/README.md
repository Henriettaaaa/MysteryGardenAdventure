# 虚拟迷宫游戏

## 项目简介

这是一个基于C++和SFML实现的虚拟迷宫游戏系统，融合了迷宫生成、路径规划和相对论可视化等功能。项目提供了友好的图形用户界面，支持多种游戏模式，并通过视觉化效果展示相对路径的概念。

## 系统要求

- Windows 10/11
- Visual Studio 2019/2022
- SFML 2.5.1 或更高版本
- C++17 标准
- 支持MP3格式的音频播放

## 核心功能

### 1. 主界面系统

- 游戏标题展示
- 三种游戏模式选择：教学模式、单人模式、双人模式
- 登录和排行榜功能入口
- 背景音乐控制
- 场景转换管理

### 2. 物理迷宫系统（PhysicalMaze）

- 支持自定义迷宫大小
- 使用并查集算法确保迷宫的连通性
- 随机生成墙壁，保证迷宫的随机性
- 采用权重优化的并查集实现
- BFS算法寻找最短路径

### 3. 虚拟迷宫系统（VirtualMaze）

- 将物理迷宫映射到虚拟空间
- 提供图形化界面展示
- 支持迷宫状态的实时更新
- 可视化展示路径和墙壁
- 路径上添加数字标记，显示路径顺序

### 4. 相对论路径展示

- 计算并展示绝对路径
- 生成相对路径A和B
- 通过不同颜色区分路径类型
- 交互式切换路径显示模式
- 在路径上显示序号标记，清晰展示路径顺序

## 游戏模式

### 1. 教学模式

- 提供游戏规则和操作指南
- 基础迷宫生成教学
- 相对论路径概念讲解
- 适合初次接触游戏的玩家

### 2. 单人模式

- 独自探索迷宫
- 计时挑战
- 迷宫大小可调节
- 难度递增

### 3. 双人模式

- 相对论路径实时展示
- A/B两个角色从不同方向出发
- 探索相对运动的奥秘
- 支持自定义迷宫大小

## 技术实现

### 1. 用户界面

- 基于SFML实现的图形界面
- 交互式按钮系统
- 场景管理和状态切换
- 背景音乐控制

### 2. 迷宫生成算法

- 初始化size × size大小的物理迷宫
- 使用并查集算法确保连通性
- 随机打乱墙的顺序保证随机性
- 通过权重优化提高合并效率

### 3. 路径查找算法

- 使用BFS算法寻找最短路径
- 支持从任意起点到终点的路径查找
- 记录完整路径信息

### 4. 虚拟映射系统

- 物理坐标到虚拟坐标的映射
- 处理墙壁和通路的转换
- 支持路径的虚拟展示
- 路径上的数字标记系统

## 项目结构

```
项目根目录/
│
├── README.md                 # 项目说明文档
├── Project1.sln              # Visual Studio 解决方案文件
│
└── Project1/                 # 主项目文件夹
    ├── main.cpp              # 程序入口点，包含主函数
    ├── PhysicalMaze.h        # 物理迷宫类声明
    ├── PhysicalMaze.cpp      # 物理迷宫类实现
    ├── VirtualMaze.h         # 虚拟迷宫类声明
    ├── VirtualMaze.cpp       # 虚拟迷宫类实现
    ├── MainScene.h           # 主场景类声明
    ├── MainScene.cpp         # 主场景类实现
    ├── arial.ttf             # 字体文件
    ├── Reflections in Silence.mp3  # 背景音乐文件
    ├── Project1.vcxproj      # Visual Studio 项目文件
    └── Project1.vcxproj.filters  # Visual Studio 项目筛选器
```

## 类设计

### 1. MainScene 类

主场景类，负责游戏主界面的显示和交互。

**主要功能：**

- 显示游戏标题和各种按钮
- 处理用户交互事件
- 管理背景音乐播放
- 控制场景状态转换

### 2. Button 类

按钮类，用于创建可交互的界面元素。

**主要功能：**

- 设置按钮外观和文本
- 处理鼠标悬停和点击事件
- 支持自定义回调函数

### 3. PhysicalMaze 类

物理迷宫类，负责迷宫的底层生成和路径查找。

**主要功能：**

- 生成随机迷宫结构
- 使用并查集算法确保迷宫连通性
- 寻找从起点到终点的最短路径
- 提供物理迷宫的数据给虚拟迷宫使用

### 4. VirtualMaze 类

虚拟迷宫类，负责迷宫的图形化展示和交互。

**主要功能：**

- 将物理迷宫转换为可视化界面
- 显示绝对路径和相对路径
- 提供路径切换按钮
- 在路径上显示数字标记
